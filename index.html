<!DOCTYPE html>
<html>
<head>
	<title>World of Shar</title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.1/jquery.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css">
	<style type="text/css">

	.form-control, .btn, .well{
		margin: 3px;
	}
	input[type="file"]{
		visibility: hidden;
	}
	</style>
	<script type="text/javascript">
		$(document).ready(function(){
			$("#save").click(function(){
				var title = $("#title").val();
				var text = $("#textarea").val();
				var blob = new Blob([text], {type: "text/plain;charset=utf-8"});
                saveAs(blob, title+".txt");
			});
			$("#load").click(function(){
				$("#fileInput").click();
			});
			$("#fileInput").change(function(e) {
				var file = e.target.files[0];
				var title = file["name"].split(".")[0];
				$("#title").val(title);
				var fileReader = new FileReader();
				fileReader.onload = function(e) { 
	      			var contents = e.target.result;
        			$("textarea").val(contents);
        		}
        		fileReader.readAsText(file);
			});
			$("#count").click(function(e){
				var text = $("#textarea").val();
				$("#words").text(text.split(" ").length);
			});
			$("#clear").click(function(){
				$("#title").val("Title");
				$("#textarea").val("Text");
			});
		});
	</script>
</head>
<body class="container-fluid">
<h2>Write </h2>
<div class="row">
	<div class="col-md-9">
		<input type="text" id="title" class="form-control" value="Title"></input>
		<textarea id="textarea" rows="20" class="form-control">Text</textarea>
	</div>
	<div id="functionality" class="col-md-1">
		<button class="btn" id="clear">Clear</button>
		<button class="btn btn-success" id="save">Save</button>
		<button class="btn btn-primary" id="load">Load</button>
		<button class="btn btn-info" id="count">Words </button>
		<h5 class="well well-sm" id="words">1</h5>
		<input type="file" id="fileInput"/>
	</div>
	
</div>
</body>
</html>
